# Netlify deployment

Netlify needs two things to deploy this Next.js app correctly:

1. Access to the repository through the Git provider integration (GitHub App, GitLab App, or Bitbucket App).
2. The official Next.js build adapter so the build output includes the generated serverless functions.

## Fixing the "Host key verification failed" error

Netlify clones your repository over SSH by default. If the Git integration loses access or was never set up, the build fails during the *preparing repo* step with the following message:

```
Host key verification failed.
fatal: Could not read from remote repository.
```

Follow these steps to resolve it:

1. Open the site in Netlify, go to **Site settings → Build & deploy → Continuous Deployment**.
2. Under *Repository*, click **Edit settings** and reconnect the site using the Netlify Git provider app (GitHub/GitLab/Bitbucket).
3. If you prefer deploy keys, remove the existing key from your Git host, then click **Regenerate key** in Netlify and add the new read-only key to the repository.
4. Retry the build once Netlify confirms it can read the repository.

You can always fall back to a manual deploy using the Netlify CLI if you need to ship quickly:

```sh
pnpm install
pnpm run build
pnpm exec netlify deploy --prod --dir=.netlify/build
```

The CLI command bundles the functions generated by `@netlify/plugin-nextjs` and uploads them directly, bypassing the Git clone stage.

## Required build settings

The repository already provides a `netlify.toml` with the correct build command, PNPM version, and the official Next.js adapter. Netlify automatically picks up that configuration.

Make sure the following environment variables are set in Netlify before building:

- `OPENAI_API_KEY` – required for the `/api/chat` route.

With repository access restored, subsequent builds should succeed without additional configuration changes.
